(()=>{function L(){u(),S(),T(),f()}function s(){v(),W(),j(),p()}function u(){var e=document.getElementById("waiting");e.style.display="block",e.style.marginBottom="20px"}function v(){var e=document.getElementById("waiting");e.style.display="none"}function S(){var e=document.getElementById("receive-score");e.style.display="block"}function W(){var e=document.getElementById("receive-score");e.style.display="none"}function T(){var e=document.getElementById("receive-verdict");e.style.display="block",e.style.marginBottom="20px"}function j(){var e=document.getElementById("receive-verdict");e.style.display="none"}function f(){var e=document.getElementById("rec-ff");e.style.display="block"}function p(){var e=document.getElementById("rec-ff");e.style.display="none"}var r={};function M(){let e=localStorage.getItem("scores");e&&(r=JSON.parse(e))}function H(){localStorage.setItem("scores",JSON.stringify(r))}function y(){for(var e in r){var l=r[e],c=document.getElementById("zad-"+e);c.innerHTML=l}H()}document.addEventListener("DOMContentLoaded",function(){M(),s(),y();var e=document.getElementById("submit-button");e.addEventListener("click",function(){var l=document.getElementById("problem").value,c=document.getElementById("code").value;let a=document.querySelector('option[value="'+l+'"]'),i=a?a.getAttribute("problem-id"):null;if(console.log("Problem ID:",i),!i){console.error("Nie znaleziono problem ID!");return}if(c.length>5e3){console.error("Kod jest za d\u0142ugi");return}fetch("https://informejtycy.pl/checker/submit",{method:"POST",headers:{Problem:i,"Content-Type":"text/plain"},body:c}).then(t=>t.json()).then(t=>{console.log("Sukces:",t);let m=t.authorization;console.log("Authorization:",m),s(),u();let g=setInterval(()=>{fetch(`https://informejtycy.pl/checker/status/${m}`).then(n=>n.json()).then(n=>{if(console.log("Status:",n),n.unauthorized===!1){var d=n.percentage,k=n.memory_limit_exceeded,I=n.time_limit_exceeded,z=n.compilation_error,B=n.invalid_problem_id,h=n.first_failed;L(),v(),p();var b=document.getElementById("receive-score");b.innerHTML="Wynik zg\u0142oszenia: "+d+"/100";var o=document.getElementById("receive-verdict");if(z)o.innerHTML="Werdykt: B\u0142\u0105d kompilacji";else if(k)o.innerHTML="Werdykt: Przekroczono limit pami\u0119ci";else if(I)o.innerHTML="Werdykt: Przekroczono limit czasu";else if(B)o.innerHTML="Werdykt: Nieprawid\u0142owy problem";else if(d===100)o.innerHTML="Werdykt: OK";else{o.innerHTML="Werdykt: Z\u0142a odpowied\u017A",f();var E=document.getElementById("receive-ff");E.innerHTML=h}r[i]=Math.max(d,r[i]||0),y(),clearInterval(g)}}).catch(n=>console.error("B\u0142\u0105d przy sprawdzaniu statusu:",n))},1e3)}).catch(t=>console.error("B\u0142\u0105d:",t))})});})();
