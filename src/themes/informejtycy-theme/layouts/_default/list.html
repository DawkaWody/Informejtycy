{{ define "main" }}
<div id="srodek">
    <div id="sidebar-left">
        {{ partial "article_list.html" . }}
    </div>

    <div id="artykul">
        <h1>Zadania</h1>
        
        <h2>Zadania podstawowe</h2>
        <table>
            {{ $files := readDir "content/exercises" }}
            {{ $sections1 := dict }}
            {{ $sections2 := dict }}
            {{ $ex_id := 0 }}
            {{ range $files }}
                {{ if eq (path.Ext .Name) ".pdf" }}
                    {{ $parts := split (path.Base .Name) "-" }}
                    {{ $table := index $parts 0 }}
                    {{ $section := index $parts 1 }}
                    {{ $number := index $parts 2 }}
                    {{ $name := delimit (slice (index $parts 3)) "-" }}
                    {{ $entry := dict "Name" .Name "Number" (string $number) "DisplayName" $name }}
                    {{ if eq $table "1" }}
                        {{ if not (isset $sections1 $section) }}
                            {{ $sections1 = merge $sections1 (dict $section (slice $entry)) }}
                        {{ else }}
                            {{ $existingEntries := index $sections1 $section }}
                            {{ $sections1 = merge $sections1 (dict $section (append $existingEntries (slice $entry))) }}
                        {{ end }}
                    {{ else if eq $table "2" }}
                        {{ if not (isset $sections2 $section) }}
                            {{ $sections2 = merge $sections2 (dict $section (slice $entry)) }}
                        {{ else }}
                            {{ $existingEntries := index $sections2 $section }}
                            {{ $sections2 = merge $sections2 (dict $section (append $existingEntries (slice $entry))) }}
                        {{ end }}
                    {{ end }}
                {{ end }}
            {{ end }}

            {{ $sections1Keys := slice }}
            {{ range $key, $value := $sections1 }}
                {{ $sections1Keys = append $sections1Keys (slice $key) }}
            {{ end }}
            {{ $sortedSections1 := sort $sections1Keys }}

            {{ range $sortedSections1 }}
                {{ $section := . }}
                {{ $entries := index $sections1 $section }}
                {{ $article := first 1 (where (where $.Site.RegularPages "Params.id" $section) "Params.nerd" false) }}
                <tr id="table1-{{ $section }}">
                    <th colspan="2" id="sec1-{{ $section }}"></th>
                </tr>
                {{ $sortedEntries := sort $entries "Number" }}
                {{ range $sortedEntries }}
                <tr>
                    <td><a href="{{ "exercises/" | relURL }}{{ .Name }}" target="_blank">{{ replace .DisplayName ".pdf" "" }}</a></td>
                    <td class="ex-score" id="zad-{{ $ex_id }}">{{ $ex_id = add $ex_id 1 }}-</td>
                </tr>
                {{ end }}
            {{ end }}
        </table>

        <h2>Zadania zaawansowane</h2>
        <table>
            {{ $sections2Keys := slice }}
            {{ range $key, $value := $sections2 }}
                {{ $sections2Keys = append $sections2Keys (slice $key) }}
            {{ end }}
            {{ $sortedSections2 := sort $sections2Keys }}

            {{ range $sortedSections2 }}
                {{ $section := . }}
                {{ $entries := index $sections2 $section }}
                {{ $article := first 1 (where (where $.Site.RegularPages "Params.id" $section) "Params.nerd" true) }}
                <tr id="table2-{{ $section }}">
                    <th colspan="2" id="sec2-{{ $section }}"></th>
                </tr>
                {{ $sortedEntries := sort $entries "Number" }}
                {{ range $sortedEntries }}
                <tr>
                    <td><a href="{{ "exercises/" | relURL }}{{ .Name }}" target="_blank">{{ replace .DisplayName ".pdf" "" }}</a></td>
                    <td class="ex-score" id="zad-{{ $ex_id }}">{{ $ex_id = add $ex_id 1 }}-</td>
                </tr>
                {{ end }}
            {{ end }}
        </table>
    </div>

    <div id="sidebar-right">
        {{ partial "send_panel.html" . }}
        {{ partial "receive.html" . }}
    </div>
</div>

<script>
    
document.addEventListener("DOMContentLoaded", function() {
document.getElementById("sec1-01").innerHTML = "1. Pierwszy program w C++";
document.getElementById("sec1-02").innerHTML = "2. Zmienne i operatory matematyczne";
document.getElementById("sec1-03").innerHTML = "3. Instrukcje warunkowe i operatory logiczne";
document.getElementById("sec1-04").innerHTML = "4. Pętle";
document.getElementById("sec1-05").innerHTML = "5. Pierwszość i podzielność liczb";
document.getElementById("sec1-06").innerHTML = "6. NWD, NWW i algorytm Euklidesa";
document.getElementById("sec1-07").innerHTML = "7. Tablice";
document.getElementById("sec1-08").innerHTML = "8. System ASCII";
document.getElementById("sec1-09").innerHTML = "9. Napisy";
document.getElementById("sec1-10").innerHTML = "10. Cyfry danej liczby i konwersja na napis";
document.getElementById("sec1-11").innerHTML = "11. Systemy liczbowe";
document.getElementById("sec1-12").innerHTML = "12. Vector";
document.getElementById("sec1-13").innerHTML = "13. Sortowanie";
document.getElementById("sec1-14").innerHTML = "14. Wyszukiwanie liniowe i binarne";
document.getElementById("sec1-15").innerHTML = "15. Funkcje";
document.getElementById("sec2-01").innerHTML = "1. Funkcje wbudowane";
document.getElementById("sec2-02").innerHTML = "2. Złożoność czasowa programów";
document.getElementById("sec2-03").innerHTML = "3. Pair i Struct";
document.getElementById("sec2-04").innerHTML = "4. Custom sort";
document.getElementById("sec2-05").innerHTML = "5. Kolejka";
document.getElementById("sec2-06").innerHTML = "6. Priority queue";
document.getElementById("sec2-07").innerHTML = "7. Set i multiset";
document.getElementById("sec2-08").innerHTML = "8. Map i Unordered map";
document.getElementById("sec2-09").innerHTML = "9. Stack";
document.getElementById("sec2-10").innerHTML = "10. Rekurencja";
// do poprawki (to było na szybko!!!)
});

</script>

{{ end }}
