### Wprowadzenie

W języku C++ funkcja `sort` umożliwia sortowanie elementów w kolekcjach, takich jak wektory czy tablice. Domyślne zachowanie funkcji `sort` opiera się na standardowym operatorze `<`, co oznacza, że elementy są sortowane w kolejności rosnącej (a raczej niemalejącej). Jednakże, jeśli chcemy zmienić kryteria sortowania, na przykład sortować napisy według ich długości, możemy skorzystać z **własnej funkcji porównującej**.

Przy użyciu funkcji porównującej, `sort` jest wywoływana w następujący sposób:

```cpp
sort(first, last, comp);
```

### Funkcja porównująca

Argument `comp` jest funkcją zdefiniowaną przez użytkownika, która określa sposób porównywania elementów. Domyślna funkcja porównująca działa w następujący sposób:

```cpp
bool comp(Typ a, Typ b)
{
    return a < b;
}
```

Rozważmy przykład sortowania liczb w kolejności malejącej. Aby to osiągnąć, należy zmienić znak porównania w funkcji `comp`:

```cpp
bool porownaj(int a, int b)
{
    return a > b;
}
```

Taką funkcję można następnie wykorzystać w sortowaniu:

```cpp
int main()
{
    vector<int> liczby = {1, 8, 3, 6, 3};
    sort(liczby.begin(), liczby.end(), porownaj);

    for (int l : liczby)
    {
        cout << l << " ";
    }
    cout << endl;
    return 0;
}
```

Po wykonaniu tego programu otrzymamy wynik:

```
8 6 3 3 1
```

### Sortowanie napisów według długości

Domyślnie napisy (typ `string`) są sortowane leksykograficznie. Aby zmienić kryterium sortowania, możemy zdefiniować funkcję porównującą opartą na długości napisów:

```cpp
bool porownaj(string a, string b)
{
    return a.size() < b.size();
}
```

Funkcja ta sortuje napisy w kolejności rosnącej według ich długości. Możemy jej użyć w programie:

```cpp
#include <iostream>
#include <vector>
#include <algorithm>

using namespace std;

bool porownaj(string a, string b)
{
    return a.size() < b.size();
}

int main()
{
    cout << "Podaj liczbę napisów do posortowania: ";
    int n; cin >> n;
    vector<string> napisy;

    for (int i = 1; i <= n; i++)
    {
        cout << "Podaj napis nr " << i << ": ";
        string napis; cin >> napis;
        napisy.push_back(napis);
    }

    sort(napisy.begin(), napisy.end(), porownaj);

    cout << "Oto napisy posortowane po długości: ";
    for (string t : napisy)
    {
        cout << t << " ";
    }
    cout << endl;

    return 0;
}
```

### Sortowanie obiektów

Funkcja porównująca umożliwia także sortowanie niestandardowych typów danych, takich jak struktury czy klasy. Rozważmy strukturę `Samochod`:

```cpp
struct Samochod
{
    string marka;
    string model;
    int hp; // Moc w koniach mechanicznych
};
```

Aby posortować samochody według mocy silnika, możemy zdefiniować funkcję porównującą:

```cpp
bool porownaj_samochody(Samochod a, Samochod b)
{
    return a.hp < b.hp;
}
```

Przykładowy program sortujący obiekty `Samochod`:

```cpp
int main()
{
    vector<Samochod> samochody = {
        {"Fiat", "126p", 30},
        {"Hennessey", "Venom F5", 1817},
        {"Mercedes", "AMG GT", 585}
    };

    sort(samochody.begin(), samochody.end(), porownaj_samochody);

    for (const Samochod& s : samochody)
    {
        s.Print();
    }
    return 0;
}
```

Zakładając, że `Samochod` ma zdefiniowany konstruktor i metodę `Print()`, po wykonaniu programu uzyskamy wynik:

```
Fiat 126p: 30hp
Mercedes AMG GT: 585hp
Hennessey Venom F5: 1817hp
```

### Złożone warunki sortowania

Funkcje porównujące mogą również uwzględniać bardziej zaawansowane kryteria. Rozważmy poniższy przykład:

```cpp
bool porownaj_samochody(Samochod a, Samochod b)
{
    if (a.marka == "Fiat" && a.model == "126p")
        return false;
    else if (b.marka == "Fiat" && b.model == "126p")
        return true;
    else if (a.hp != b.hp)
        return a.hp < b.hp;
    else
        return a.model.size() < b.model.size();
}
```

Funkcja sortuje samochody według mocy silnika, a w przypadku równej mocy - według długości nazwy modelu. Jednocześnie `Fiat 126p` zawsze trafia na koniec listy. Pełny przykład:

```cpp
int main()
{
    vector<Samochod> samochody = {
        {"Fiat", "126p", 30},
        {"Hennessey", "Venom F5", 1817},
        {"Mercedes", "AMG GT", 585},
        {"Fiat", "Punto", 77},
        {"Test", "bardzodluganazwamodelu", 77}
    };

    sort(samochody.begin(), samochody.end(), porownaj_samochody);

    for (const Samochod& s : samochody)
    {
        s.Print();
    }

    return 0;
}
```

Wynik sortowania dla podanych danych:

```
Fiat Punto: 77hp
Test bardzodluganazwamodelu: 77hp
Mercedes AMG GT: 585hp
Hennessey Venom F5: 1817hp
Fiat 126p: 30hp
```

### Podsumowanie

Własna funkcja porównująca pozwala na dostosowanie działania funkcji `sort` do specyficznych potrzeb użytkownika. Może być ona stosowana do sortowania dowolnych kolekcji obsługiwanych przez standardowe algorytmy C++. Pamiętaj jednak o najważniejszej zasadzie: funkcja porównująca musi przyjmować dwa argumenty o odpowiednich typach oraz zwracać wartość typu `bool`.
