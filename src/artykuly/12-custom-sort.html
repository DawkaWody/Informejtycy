<!DOCTYPE html>
<html lang="pl">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Podstawowa struktura programu w C++</title>
	<link rel="icon" type="image/x-icon" href="../img/kolko-logo.png">
	<link rel="preconnect" href="https://fonts.googleapis.com">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link
		href="https://fonts.googleapis.com/css2?family=Edu+VIC+WA+NT+Beginner:wght@400..700&family=Funnel+Display:wght@300..800&family=Funnel+Sans:ital,wght@0,300..800;1,300..800&display=swap"
		rel="stylesheet">
	<link rel="stylesheet" href="../style.css">

	<script type="text/javascript" async
        src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js?config=TeX-MML-AM_CHTML">
    </script>

</head>

<body>
	
	<header class="no-select">
		<div id="menu">
			<img id="menu-img" src="../img/menu.png">
		</div>
		<div id="baner">
			<a href="../glowna.html">
				<img id="baner-img" src="../img/baner-ciemne.png">
			</a>
		</div>
		<img src="../img/theme.png" id="theme-toggle">
	</header>

	<div id="srodek">
		<div id="sidebar-left">
			<h2>Lista tematów</h2>
			<ul>
				<li><a href="1-struktura-programu.html">1. Struktura programu w C++</a></li>
				<li><a href="2-input-output.html">2. Input-output, zmienne</a></li>
				<li><a href="3-if.html">3. If</a></li>
				<li><a href="4-for-while.html">4. For, while</a></li>
				<li><a href="5-tablice-vector.html">5. Tablice, vector</a></li>
				<li><a href="6-ascii.html">6. ASCII</a></li>
				<li><a href="7-string.html">7. String</a></li>
				<li><a href="8-min-max.html">8. Min, max, swap i inne</a></li>
				<li><a href="9-zlozonosc-czasowa.html">9. Złożoność czasowa</a></li>
				<li><a href="10-wlasne-funkcje.html">10. Własne funkcje</a></li>
				<li><a href="11-pair-struct.html">11. Pair, struct</a></li>
				<li><a href="12-custom-sort.html" id="aktualny-temat">12. Własne sortowanie</a></li>
				<li><a href="13-queue-deque.html">13. Queue, deque</a></li>
				<li><a href="14-priority-queue.html">14. Priority queue</a></li>
				<li><a href="15-set.html">15. Set, multiset</a></li>
				<li><a href="16-map.html">16. Unordered map, map</a></li>
				<li><a href="17-stack.html">17. Stack</a></li>
				<li><a href="18-rekurencja.html">18. Rekurencja</a></li></ul>
		</div>

		<div id="artykul"><h1>Własne sortowanie</h1>

<div id="1" class="odnosnik"></div>	
<p>Znasz już funkcję <code>sort</code>, która pozwala na posortowanie jakiejś struktury, ale sposób w jaki to robi nie jest zależny od Ciebie. Co jeśli chcemy posortować stringi np. według ich długości? Musimy wtedy sprawić, aby funkcja <code>sort</code> zachowywała się inaczej niż zwykle i do tego potrzebna jest <strong>własna funkcja porównująca</strong>. Wtedy sortowanie wygląda tak:</p>

<pre><code><span class="variable">sort</span>(<span class="variable">first</span>, <span class="variable">last</span>, <span class="variable">comp</span>);</code></pre>

<div id="2" class="odnosnik"></div>	
<h2>Funkcja porównująca</h2>

<p><code>comp</code> jest funkcją, którą musimy sami stworzyć. Domyślna funkcja <code>comp</code> sortuje rosnąco (<span class="variable">a</span> raczej niemalejąco) i wygląda tak:</p>

<pre><code><span class="type">bool</span> <span class="variable">comp</span>(<span class="type">Typ</span> <span class="variable">a</span>, <span class="type">Typ</span> <span class="variable">b</span>)
{
    <span class="inne">return</span> <span class="variable">a</span> < <span class="variable">b</span>;
}</code></pre>

<p>Na początek coś prostego: jak posortować liczby w kolejności malejącej? Wystarczy, że przepiszemy funkcję 'comp', ale z odwrotnym znakiem tak jak tutaj:</p>

<pre><code><span class="type">bool</span> <span class="variable">comp</span>(<span class="type">int</span> <span class="variable">a</span>, <span class="type">int</span> <span class="variable">b</span>)
{
    <span class="inne">return</span> <span class="variable">a</span> > <span class="variable">b</span>;
}</code></pre>

<p>i teraz możemy jej użyć do porównywania!</p>

<pre><code><span class="type">int</span> <span class="variable">main</span>()
{
    <span class="type">vector</span>&lt;<span class="type">int</span>&gt; <span class="variable">liczby</span> = { <span class="number">1</span>, <span class="number">8</span>, <span class="number">3</span>, <span class="number">6</span>, <span class="number">3</span> };
    <span class="variable">sort</span>(<span class="variable">liczby</span>.<span class="variable"><span class="variable">begin</span></span>(), <span class="variable">liczby</span>.<span class="variable"><span class="variable">end</span></span>(), <span class="variable">comp</span>);
}</code></pre>

<p>Zauważ, że przy podawaniu funkcji <code>comp</code> nie piszemy nawiasów. To ważne - gdybyśmy podali ją z nawiasami, to program zwróciłby błąd. Jeśli teraz wypiszemy wektor <code>liczby</code> to otrzymamy</p>

<pre><code><span class="number">8</span> <span class="number">6</span> <span class="number">3</span> <span class="number">3</span> <span class="number">1</span></code></pre>

<p>Pełny kod do tego przykładu wygląda tak:</p>

<pre><code><span class="inne">#include</span> <span class="io">&lt;iostream&gt;</span>
<span class="inne">#include</span> <span class="io">&lt;vector&gt;</span>
<span class="inne">#include</span> <span class="io">&lt;algorithm&gt;</span>
<span class="inne">using</span> <span class="io">namespace <span class="variable">std</span></span>;

<span class="type">bool</span> <span class="variable">comp</span>(<span class="type">int</span> <span class="variable">a</span>, <span class="type">int</span> <span class="variable">b</span>)
{
    <span class="inne">return</span> <span class="variable">a</span> > <span class="variable">b</span>;
}

<span class="type">int</span> <span class="variable">main</span>()
{
    <span class="type">vector</span>&lt;<span class="type">int</span>&gt; <span class="variable">liczby</span> = { <span class="number">1</span>, <span class="number">8</span>, <span class="number">3</span>, <span class="number">6</span>, <span class="number">3</span> };
    <span class="variable">sort</span>(<span class="variable">liczby</span>.<span class="variable"><span class="variable">begin</span></span>(), <span class="variable">liczby</span>.<span class="variable"><span class="variable">end</span></span>(), <span class="variable">comp</span>);
    <span class="inne">for</span> (<span class="type">int</span> <span class="variable">l</span> : <span class="variable">liczby</span>)
        <span class="io">cout</span> << <span class="variable">l</span> << <span class="string">" "</span>;
    <span class="io">cout</span> << <span class="io">endl</span>;
}</code></pre>

<div id="3" class="odnosnik"></div>	
<h2>Własne sortowanie</h2>

<p>Teraz powróćmy do pytania z początku: jak posortować stringi według ich długości? Pamiętajmy, że stringi domyślnie sortują się leksykograficznie, więc musimy napisać swoją funkcję. Funkcja ta mogłaby wyglądać tak:</p>

<pre><code><span class="type">bool</span> <span class="variable">comp</span>(<span class="type">string</span> <span class="variable">a</span>, <span class="type">string</span> <span class="variable">b</span>)
{
    <span class="inne">return</span> <span class="variable">a</span>.<span class="variable">size</span>() < <span class="variable">b</span>.<span class="variable">size</span>();
}</code></pre>

<p>funkcja ta będzie sortować je rosnąco, ale wystarczy, że odwrócimy znak i może sortować malejąco. Wczytajmy teraz kilka napisów do wektora <span class="variable">a</span> potem go posortujmy.</p>

<pre><code><span class="inne">#include</span> <span class="io">&lt;iostream&gt;</span>
<span class="inne">#include</span> <span class="io">&lt;vector&gt;</span>
<span class="inne">#include</span> <span class="io">&lt;algorithm&gt;</span>
<span class="inne">using</span> <span class="io">namespace <span class="variable">std</span></span>;

<span class="type">bool</span> <span class="variable">comp</span>(<span class="type">string</span> <span class="variable">a</span>, <span class="type">string</span> <span class="variable">b</span>)
{
    <span class="inne">return</span> <span class="variable">a</span>.<span class="variable">size</span>() < <span class="variable">b</span>.<span class="variable">size</span>();
}

<span class="type">int</span> <span class="variable">main</span>()
{
    <span class="io">cout</span> << <span class="string">"Podaj liczbe napisów do posortowania: "</span>;
    <span class="type">int</span> <span class="variable">n</span>; <span class="io">cin</span> >> <span class="variable">n</span>;
    <span class="type">vector</span>&lt;<span class="type">string</span>&gt; <span class="variable">napisy</span>(<span class="variable">n</span>);
    <span class="inne">for</span> (<span class="type">int</span> <span class="variable">i</span> = <span class="number">0</span>; <span class="variable">i</span> < <span class="variable">n</span>; <span class="variable">i</span>++)
    {
        <span class="io">cout</span> << <span class="string">"Podaj napis nr "</span> << <span class="variable">i</span> << <span class="string">": "</span>;
        <span class="io">cin</span> >> <span class="variable">napisy</span>[<span class="variable">i</span>];
    }

    <span class="variable">sort</span>(<span class="variable">napisy</span>.<span class="variable">begin</span>(), <span class="variable">napisy</span>.<span class="variable">end</span>(), <span class="variable">comp</span>);

    <span class="io">cout</span> << <span class="string">"Oto napisy posortowane wedlug ich dlugosci: "</span> << <span class="string">" "</span>;
    <span class="inne">for</span> (<span class="type">string</span> <span class="variable">n</span> : <span class="variable">napisy</span>)
        <span class="io">cout</span> << <span class="variable">n</span> << <span class="string">" "</span>;
    <span class="io">cout</span> << <span class="io">endl</span>;

    <span class="inne">return</span> <span class="number">0</span>;
}</code></pre>

<div id="4" class="odnosnik"></div>	
<h2>Sortowanie własnych obiektów</h2>

<p>Dzięki własnej funkcji porównującej można sortować również swoje obiekty! Na początek stwórzmy przykładowego structa - np. samochód.</p>

<pre><code><span class="type">struct</span> <span class="variable">Samochod</span>
{
    <span class="type">string</span> <span class="variable">marka</span>;
    <span class="type">string</span> <span class="variable">model</span>;
    <span class="type">int</span> <span class="variable">hp</span>; <span class="comment">// konie mechaniczne</span>
};</code></pre>

<p>Powiedzmy, że chcemy posortować wektor po liczbie koni mechanicznych (<span class="variable">hp</span>). Do tego również użyjemy własnej funkcji.</p>

<pre><code><span class="type">bool</span> <span class="variable">comp</span>(<span class="variable">Samochod</span> <span class="variable">a</span>, <span class="variable">Samochod</span> <span class="variable">b</span>)
{
    <span class="inne">return</span> <span class="variable">a</span>.<span class="variable">hp</span> < <span class="variable">b</span>.<span class="variable">hp</span>;
}</code></pre>

<p>Sortowanie wektora z paroma samochodami wygląda wtedy podobnie do poprzednich przykładów:</p>

<pre><code><span class="type">int</span> <span class="variable">main</span>()
{
    <span class="type">vector</span>&lt;<span class="variable">Samochod</span>&gt; <span class="variable">samochody</span>;
    <span class="comment">// Deklarujemy kilka samochodów</span>
    <span class="variable">Samochod</span> s1(<span class="string">"Fiat"</span>, <span class="string">"126p"</span>, <span class="number">30</span>);
    <span class="variable">Samochod</span> s2(<span class="string">"Hennessey"</span>, <span class="string">"Venom F5"</span>, <span class="number">1817</span>);
    <span class="variable">Samochod</span> s3(<span class="string">"Mercedes"</span>, <span class="string">"AMG GT"</span>, <span class="number">585</span>);
    <span class="variable">samochody</span>.<span class="inne">push_back</span>(s1);
    <span class="variable">samochody</span>.<span class="inne">push_back</span>(s2);
    <span class="variable">samochody</span>.<span class="inne">push_back</span>(s3);

    <span class="comment">// Sortujemy samochody i wypisujemy ich dane na wyjście</span>
    <span class="variable">sort</span>(<span class="variable">samochody</span>.<span class="variable">begin</span>(), <span class="variable">samochody</span>.<span class="variable">end</span>(), <span class="variable">comp</span>());

    <span class="inne">for</span> (<span class="variable">Samochod</span> s : <span class="variable">samochody</span>)
        s.<span class="inne">Wypisz</span>();
}</code></pre>

<p>Zakładając, że <code>Samochod</code> ma zdefiniowany konstruktor i metodę <code>Wypisz()</code> program powinien wypisać mniej więcej coś takiego:</p>

<pre><code>Fiat 126p: <span class="">30</span>hp
Mercedes AMG GT: <span class="">585</span>hp
Hennessey Venom F5: <span class="">1817</span>hp</code></pre>

<div id="5" class="odnosnik"></div>	
<h2>Zaawansowane porównywanie</h2>

<p>W każdym z poprzednich przykładów funkcja sortująca miała 1 linię, ale oczywiście można posortować weług bardziej skomplikowanych warunków. W tym przykładzie nadal sortujemy samochody po liczbie koni mechanicznych, ale jeśli wartości są równe to według długości nazwy modelu, chyba że samochód to fiat 126p - wtedy natychmiast idzie na koniec.</p>

<pre><code><span class="type">bool</span> <span class="variable">comp</span>(<span class="variable">Samochod</span> <span class="variable">a</span>, <span class="variable">Samochod</span> <span class="variable">b</span>)
{
    <span class="inne">if</span> (<span class="variable">a</span>.<span class="variable">marka</span> == <span class="string">"Fiat"</span> && <span class="variable">a</span>.<span class="variable">model</span> == <span class="string">"126p"</span>)
        <span class="inne">return</span> <span class="type">false</span>;
    <span class="inne">else if</span> (<span class="variable">b</span>.<span class="variable">marka</span> == <span class="string">"Fiat"</span> && <span class="variable">b</span>.<span class="variable">model</span> == <span class="string">"126p"</span>)
        <span class="inne">return</span> <span class="type">true</span>;
    <span class="inne">else</span>
    {
        <span class="inne">if</span> (<span class="variable">a</span>.<span class="variable">hp</span> != <span class="variable">b</span>.<span class="variable">hp</span>)
            <span class="inne">return</span> <span class="variable">a</span>.<span class="variable">hp</span> < <span class="variable">b</span>.<span class="variable">hp</span>;
        <span class="inne">else</span>
            <span class="inne">return</span> <span class="variable">a</span>.<span class="variable">model</span>.<span class="variable">size</span>() < <span class="variable">b</span>.<span class="variable">model</span>.<span class="variable">size</span>();
    }
}</code></pre>

<p>Zauważ, że funkcja porównująca ma zwracać czy <span class="variable">a</span> jest mniejsze od <span class="variable">b</span>, więc za pomocą wartości logicznych możemy trochę "oszukać" sortowanie (choć własna funkcja to już oszukiwanie sortowania!), żeby pewne elementy zawsze były traktowane priorytetowo. Teraz możemy dodać trochę więcej samochodów i przetestować nasze sortowanie.</p>

<pre><code><span class="type">int</span> <span class="variable">main</span>()
{
    <span class="type">vector</span>&lt;<span class="variable">Samochod</span>&gt; <span class="variable">samochody</span>;
    <span class="comment">// Deklarujemy kilka samochodów</span>
    <span class="variable">Samochod</span> s1(<span class="string">"Fiat"</span>, <span class="string">"126p"</span>, <span class="number">30</span>);
    <span class="variable">Samochod</span> s2(<span class="string">"Hennessey"</span>, <span class="string">"Venom F5"</span>, <span class="number">1817</span>);
    <span class="variable">Samochod</span> s3(<span class="string">"Mercedes"</span>, <span class="string">"AMG GT"</span>, <span class="number">585</span>);
    <span class="variable">Samochod</span> s4(<span class="string">"Fiat"</span>, <span class="string">"punto"</span>, <span class="number">77</span>);
    <span class="variable">Samochod</span> s5(<span class="string">"Samochodzik"</span>, <span class="string">"bardzodluganazwamodelu"</span>, <span class="number">77</span>);
    <span class="variable">samochody</span>.<span class="inne">push_back</span>(s1);
    <span class="variable">samochody</span>.<span class="inne">push_back</span>(s2);
    <span class="variable">samochody</span>.<span class="inne">push_back</span>(s3);
    <span class="variable">samochody</span>.<span class="inne">push_back</span>(s4);
    <span class="variable">samochody</span>.<span class="inne">push_back</span>(s5);

    <span class="comment">// Sortujemy samochody i wypisujemy ich dane na wyjście</span>
    <span class="variable">sort</span>(<span class="variable">samochody</span>.<span class="variable">begin</span>(), <span class="variable">samochody</span>.<span class="variable">end</span>(), <span class="variable">comp</span>);

    <span class="inne">for</span> (<span class="variable">Samochod</span> s : <span class="variable">samochody</span>)
        s.<span class="inne">Wypisz</span>();
}</code></pre>

<p>Dla takich danych program wypisze:</p>

<pre><code>Fiat punto: <span class=" ">77</span>hp
Samochodzik bardzodluganazwamodelu: <span class=" ">77</span>hp
Mercedes AMG GT: <span class=" ">585</span>hp
Hennessey Venom F5: <span class=" ">1817</span>hp
Fiat 126p: <span class=" ">30</span>hp</code></pre>

<div id="6" class="odnosnik"></div>	
    <h2>Możliwe błędy</h2>
    <p>Jest kilka rzeczy, o których należy pamiętać używając custom sorta:</p>
    <ol>
        <li>
            Należy pamiętać, że <em>funkcja porównująca musi przyjmować takie typy danych jakie są w kolekcji do posortowania i zawsze zwracać wartość typu <code>bool</code>.</em> Na przykład jeśli posortujemy wektor:
            <pre><code><span class="type">vector</span>&lt;<span class="type">int</span>&gt; <span class="variable">w</span>  = { <span class="string">"abc"</span>, <span class="string">"def"</span>, <span class="string">"ghi"</span> };</code></pre>
            funkcją
<pre><code><span class="type">bool</span> <span class="variable">comp</span>(<span class="type">int</span> <span class="variable">a</span>, <span class="type">int</span> <span class="variable">b</span>)
{
    <span class="inne">return</span> <span class="variable">a</span> > <span class="variable">b</span>;
}</code></pre>
            to kod się nie skompiluje. Zobaczymy wtedy błąd podobny do tego:
            <pre><code class="">cannot convert argument from '<span class="variable">std</span>::<span class="variable">basic_string</span>' to '<span class="variable">int</span>'</code></pre>
        </li>
        <li>
            Jeśli kiedyś funkcja sortująca posortuje odwrotnie niż chcesz, spróbuj odwrócić znak - odwróci to kolejność sortowania.
        </li>
    </ol>

<div id="7" class="odnosnik"></div>	
    <h2>Podsumowanie</h2>
    <p>Dzięki własnej funkcji porównującej możesz zmienić zachowanie funkcji <code>sort</code> tak aby pasowała do twoich potrzeb! W przykładach sortujemy wektory, ale własną funkcję porównującą można zastosować na każdej kolekcji, która da się posortować, np. tablicy. <strong>Własne sortowanie</strong> to bardzo przydatna funkcjonalność i pewnie użyjesz jej wiele razy!</p>
</div>

		<div id="sidebar-right">
			<h2>Spis treści</h2>
			<ul>
				<li><a href="#1">1. Wstęp</a></li>
				<li><a href="#2">2. Funkcja porównująca</a></li>
				<li><a href="#3">3. Własne sortowanie</a></li>
				<li><a href="#4">4. Sortowanie struktur</a></li>
				<li><a href="#5">5. Zaawansowane porównywanie</a></li>
				<li><a href="#6">6. Możliwe błędy</a></li>
				<li><a href="#7">7. Podsumowanie</a></li>
			</ul>
		</div>
	</div>

	<footer>
		Projekt realizowany w ramach Olimpiady Zwolnieni Z Teorii<br>
		Kontakt: kontakt.informejtycy@gmail.com<br>
		&copy; 2025 Wszelkie prawa zastrzeżone
	</footer>
    <script src="../theme.js"></script>
	

</body>

</html>
